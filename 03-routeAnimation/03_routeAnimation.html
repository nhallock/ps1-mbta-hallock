<!-- -------------------------------- -->
<!-- ------- Marker Animation ------- -->
<!-- -------------------------------- -->


<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Add a default marker</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.css" rel="stylesheet" />
<style>
  body { margin: 0; padding: 0; }
  #map { position: absolute; top: 0; bottom: 0; width: 100%; }

.map-overlay {
  position: absolute;
  left: 0;
  padding: 10px;
}
 
</style>
</head>
<body>
<div id="map"></div>

<div class="map-overlay top">
  <button style="font-size: 2em" onclick="move()">
    Show Route
  </button>
</div>
 
<script>
  // api token
  mapboxgl.accessToken = 'pk.eyJ1Ijoic29mdGV4cGVyaW1lbnQiLCJhIjoiY2tjMngyZm9rMDFvajJzczJ3aWo0bnh6aiJ9.Bc_qK9Xf8SFBXkFM_x2gpg';

  // map instance
  var map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v11',
      center: [-71.104081, 42.365554],
      zoom: 14
  });

  // map marker
  var marker = new mapboxgl.Marker()
      .setLngLat([-71.092761, 42.357575])
      .addTo(map);

  const busStops = [
      [-71.076023, 42.370808],  //1
      [-71.080239, 42.373087],  //2 
      [-71.082879,  42.373713], //3
      [-71.087974, 42.376982],  //4
      [-71.089893, 42.381499],  //5
      [-71.092902, 42.384701],  //6
      [-71.094198, 42.385187],  //7 
      [-71.096633, 42.386151],  //8
      [-71.098722, 42.386837],  //9
      [-71.100849, 42.387680],  //10
      [-71.103432, 42.388423],  //11
      [-71.105221, 42.389015],  //11
      [-71.108921, 42.390571],  //12
      [-71.110642, 42.391566],  //13
      [-71.114001, 42.392904],  //14
      [-71.116810, 42.394114],  //15
      [-71.120497, 42.395706],  //16
      [-71.122315, 42.396717],  //17
  ];

  // animate marker
  let counter = 0;

  var walker = function(){
      if(counter >= busStops.length) return;
      marker.setLngLat(busStops[counter]);
      counter++;
      move();
    }

  function move(){
    setTimeout(walker, 1000);
  }

</script>
 
</body>
</html>